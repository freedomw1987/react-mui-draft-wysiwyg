(this["webpackJsonpreact-mui-draft-wysiwyg-example"]=this["webpackJsonpreact-mui-draft-wysiwyg-example"]||[]).push([[0],{322:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(42),r=a.n(l),i=a(3),c=a.n(i),s=a(13),u=a(376),g=a(404),d=a(387),m=a(391),p=a(388),h=a(168),f=a.n(h),b=a(169),y=a.n(b),C=a(170),E=a.n(C),v=a(171),k=a.n(v),S=a(172),x=a.n(S),R=a(173),T=a.n(R),j=a(116),O=a.n(j),w=a(398),A=a(399),I=a(392),D=a(408),q=a(409),L=a(410),z=a(406),M=a(411),F=a(174),B=a.n(F),N=a(117),K=a.n(N),P=a(389),W=a(401),H=a(176),U=a.n(H),V=a(177),_=a.n(V),G=a(178),J=a.n(G),$=a(179),Y=a.n($),Z=a(180),Q=a.n(Z),X=a(181),ee=a.n(X),te=a(184),ae=a.n(te),ne=a(182),oe=a.n(ne),le=a(183),re=a.n(le),ie=a(185),ce=a.n(ie),se=a(70),ue=a.n(se),ge=a(407),de=a(393),me=a(385),pe=a(386),he=a(188),fe=a.n(he),be=a(397),ye=a(412),Ce=a(95),Ee=a(187),ve=a.n(Ee),ke=a(186),Se=a.n(ke),xe=a(118),Re=a.n(xe),Te=a(119),je=a.n(Te),Oe=a(189),we=a.n(Oe),Ae=a(190),Ie=a.n(Ae),De=a(405);a(317);function qe(){return o.a.useContext(Mt)}function Le(){const e=qe(),[t,a]=o.a.useState(0);return o.a.useEffect((()=>{t>0&&e.ref.focus()}),[t,e.ref]),()=>{a((e=>e+1))}}const ze=Object(p.a)({badge:e=>({background:e.badgeColor})});function Me(e){let{children:t,onClick:a,disabled:n=!1,active:l=!1,text:r="",badgeColor:i=null,...c}=e;const s=ze({badgeColor:i});return o.a.createElement(d.a,{title:r,"aria-disabled":n},o.a.createElement("span",null,o.a.createElement(g.a,Object.assign({onClick:a,disabled:n,color:l?"primary":"default"},c),o.a.createElement(m.a,{anchorOrigin:{vertical:"top",horizontal:"left"},classes:{badge:s.badge},overlap:"circular",badgeContent:" ",invisible:null===i,variant:"dot"},t))))}Me.propTypes={children:c.a.any.isRequired,onClick:c.a.func.isRequired,disabled:c.a.bool,text:c.a.any,badgeColor:c.a.any,active:c.a.bool};const Fe=(e,t,a)=>{const n=e.getSelection(),o=t.reduce(((e,t)=>s.Modifier.removeInlineStyle(e,n,t)),e.getCurrentContent());let l=s.EditorState.push(e,o,"change-inline-style");const r=e.getCurrentInlineStyle();return n.isCollapsed()&&(l=r.reduce(((e,t)=>s.RichUtils.toggleInlineStyle(e,t)),l)),r.has(a)||(l=s.RichUtils.toggleInlineStyle(l,a)),l},Be=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=e.getCurrentInlineStyle();return n.find((e=>t.includes(e)))||a};function Ne(e){let{inlineStyle:t,children:a,text:n}=e;const l=qe(),r=Le(),[i,c]=o.a.useState(!1);o.a.useEffect((()=>{c(((e,t)=>{const a=e.getSelection(),n=a.getStartKey(),o=a.getStartOffset(),l=a.getEndKey(),r=a.getEndOffset(),i=e.getCurrentContent();let c=i.getBlockForKey(n),s=!0;const u=e=>(t,a)=>{const i=e.getKey()===n?o:0,c=e.getKey()===l?r:e.getLength()-1;s=t<=i&&a>=c};for(;c&&s&&(s=!1,c.findStyleRanges((e=>e.hasStyle(t)),u(c)),c.getKey()===l);)c=i.getBlockAfter(c.getKey());return s})(l.editorState,t))}),[l.editorState,t]);return o.a.createElement(Me,{text:n,onClick:()=>{const e=s.RichUtils.toggleInlineStyle(l.editorState,t);l.onChange(e),r()},active:i,disabled:l.editorState.getSelection().isCollapsed()},a)}Ne.propTypes={inlineStyle:c.a.string.isRequired,children:c.a.any.isRequired,text:c.a.any};var Ke="BOLD",Pe="ITALIC",We="UNDERLINE",He="STRIKETHROUGH",Ue="FONT_FAMILY",Ve="FONT_SIZE",_e="FONT_COLOR",Ge="FONT_BACKGROUND";var Je="LINK",$e="IMAGE";const Ye=(e,t,a)=>{e.findEntityRanges((e=>{const t=e.getEntity();return null!==t&&a.getEntity(t).getType()===Je}),t)},Ze=e=>{let{contentState:t,entityKey:a,blockKey:n,start:l,end:r,children:i}=e;const[c,u]=o.a.useState(null),g=qe(),d=Le(),{url:m}=t.getEntity(a).getData();return o.a.createElement(o.a.Fragment,null,o.a.createElement(L.a,{href:m,rel:"noopener noreferrer",target:"_blank","aria-label":m,onClick:e=>{u(e.currentTarget)}},i),o.a.createElement(z.a,{open:Boolean(c),onClose:()=>{u(null)},anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},o.a.createElement(M.a,{size:"small","aria-label":"Link options"},o.a.createElement(q.a,{onClick:e=>{e.preventDefault(),e.stopPropagation(),window.open(m,"_blank")},title:"Open ".concat(m)},o.a.createElement(B.a,null)),o.a.createElement(q.a,{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=s.SelectionState.createEmpty(n).merge({anchorKey:n,anchorOffset:l,focusKey:n,focusOffset:r});g.onChange(s.RichUtils.toggleLink(g.editorState,t,null)),d()},title:"Remove link"},o.a.createElement(K.a,null)))))};Ze.propTypes={contentState:c.a.object.isRequired,entityKey:c.a.string.isRequired,blockKey:c.a.string.isRequired,start:c.a.number.isRequired,end:c.a.number.isRequired,children:c.a.any};const Qe="lang::",Xe=Object(p.a)((e=>({selectControl:{margin:1}})));function et(e){let{value:t,onChange:a,options:n,minWidth:l=120,...r}=e;const i=Xe(),c=qe();return o.a.createElement(P.a,Object.assign({value:t,onChange:e=>a(e.target.value),className:i.selectControl,style:{minWidth:l}},r),n.map((e=>{return o.a.createElement(W.a,{key:e.value||"empty",value:e.value},e.text?(t=e.text,a=c.translate,("string"===typeof t||t instanceof String)&&t.substr(0,Qe.length)===Qe?a(t.substr(Qe.length)):t):"");var t,a})))}function tt(e){let{configuration:t,defaultConfiguration:a}=e;const n=qe(),l=Le(),r=t.options||a.options,[i,c]=o.a.useState("default");o.a.useEffect((()=>{c(((e,t)=>{const a=s.RichUtils.getCurrentBlockType(e);return t.find((e=>e===a))?a:"default"})(n.editorState,r.map((e=>e.value))))}),[n,r]);return o.a.createElement(et,{options:r,onChange:e=>{c(e);const t=s.RichUtils.toggleBlockType(n.editorState,"normal"===e?"":e);n.onChange(t),l()},value:i})}function at(e){let{blockType:t,children:a,text:n}=e;const l=qe(),r=Le();return o.a.createElement(Me,{text:n,onClick:()=>{const e=s.RichUtils.toggleBlockType(l.editorState,t);l.onChange(e),r()}},a)}et.propTypes={value:c.a.string.isRequired,onChange:c.a.func.isRequired,options:c.a.array.isRequired,minWidth:c.a.number},tt.propTypes={configuration:c.a.any,defaultConfiguration:c.a.any.isRequired},at.propTypes={blockType:c.a.string.isRequired,children:c.a.any.isRequired,text:c.a.any};var nt="ordered-list-item",ot="atomic";function lt(e){let{pluginData:t}=e;const a=qe(),n=Le(),[l,r]=o.a.useState("".concat(Ue,"-default")),i=Object.keys(t.customStyleMap);o.a.useEffect((()=>{r(Be(a.editorState,i,"".concat(Ue,"-default")))}),[a.editorState,i]);return o.a.createElement(et,{options:i.map((e=>({value:e,text:t.customStyleMap[e].fontFamily?o.a.createElement("span",{style:{fontFamily:t.customStyleMap[e].fontFamily}},t.customStyleMap[e].fontFamily):"default"}))),onChange:e=>{r(e);const t=Fe(a.editorState,i,e);a.onChange(t),n()},value:l})}lt.propTypes={pluginData:c.a.any.isRequired};function rt(){const e=qe(),t=Le(),[a,n]=o.a.useState(null);o.a.useEffect((()=>{const t=e.editorState.getSelection(),a=e.editorState.getCurrentContent().getBlockForKey(t.getStartKey()).getData();a&&a.get("textAlign")?n(a.get("textAlign")):n(null)}),[e.editorState]);const l=a=>{n(a);const{editorState:o}=e,l=s.Modifier.mergeBlockData(o.getCurrentContent(),o.getSelection(),{textAlign:a});e.onChange(s.EditorState.push(o,l,"change-block-data")),t()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me,{active:"left"===a,onClick:()=>l("left"),text:e.translate("controls.textAlign.actions.alignLeft")},o.a.createElement(J.a,null)),o.a.createElement(Me,{active:"center"===a,onClick:()=>l("center"),text:e.translate("controls.textAlign.actions.alignCenter")},o.a.createElement(Y.a,null)),o.a.createElement(Me,{active:"right"===a,onClick:()=>l("right"),text:e.translate("controls.textAlign.actions.alignRight")},o.a.createElement(Q.a,null)),o.a.createElement(Me,{active:"justify"===a,onClick:()=>l("justify"),text:e.translate("controls.textAlign.actions.justify")},o.a.createElement(ee.a,null)))}rt.propTypes={};function it(e){let{pluginData:t}=e;const a=qe(),n=Le(),[l,r]=o.a.useState("".concat(Ve,"-default")),i=Object.keys(t.customStyleMap);o.a.useEffect((()=>{r(Be(a.editorState,i,"".concat(Ve,"-default")))}),[a.editorState,i]);return o.a.createElement(et,{options:i.map((e=>({text:t.customStyleMap[e].fontSize?o.a.createElement("span",{style:{fontSize:t.customStyleMap[e].fontSize}},t.customStyleMap[e].fontSize):"default",value:e}))),onChange:e=>{r(e);const t=Fe(a.editorState,i,e);a.onChange(t),n()},renderValue:e=>t.customStyleMap[e].fontSize||a.translate("controls.fontSize.labels.default"),value:l,minWidth:50})}it.propTypes={pluginData:c.a.object.isRequired};const ct=e=>{let t,a,n;e.match(/^rgb/)?(t=(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/))[1],a=e[2],n=e[3]):(t=(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")))>>16,a=e>>8&255,n=255&e);return Math.sqrt(t*t*.299+a*a*.587+n*n*.114)>127.5?"light":"dark"},st=Object(p.a)({colorRow:{display:"flex",alignContent:"center",alignItems:"center",padding:5},colorItem:{height:25,width:25,borderRadius:"50%",margin:3,border:"solid 1px #c4c4c4",cursor:"pointer",display:"flex",alignContent:"center",alignItems:"center"}});function ut(e){let{selectedColor:t,onSelectColor:a,colors:n,colorsPerRow:l=10,children:r,...i}=e;const c=st(),[s,u]=o.a.useState(null),g=Math.random().toString(36).substring(8),m=[[]];for(let o=0,d=0;o<n.length;o++)o%l===0&&(d++,m[d]=[]),m[d].push(n[o]);const p=()=>{u(null)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me,Object.assign({onClick:e=>{u(e.currentTarget)},"aria-controls":g,"aria-haspopup":"true",badgeColor:t?t.color:null},i),r),o.a.createElement(z.a,{id:g,anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,open:Boolean(s),onClose:p},o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{startIcon:o.a.createElement(oe.a,null),fullWidth:!0,color:"secondary",onClick:()=>{p(),a(null)}},"None"),m.map(((e,n)=>o.a.createElement("div",{key:"color-row-".concat(n),className:c.colorRow},e.map((e=>o.a.createElement(d.a,{key:e.value,title:e.text},o.a.createElement("div",{onClick:()=>{p(),a(e)},className:c.colorItem,style:{backgroundColor:e.color}},t&&e.value===t.value?o.a.createElement(re.a,{style:{color:"dark"===ct(e.color)?"#fff":"#000"}}):null))))))))))}function gt(e){let{configuration:t,defaultConfiguration:a,pluginData:n,colorCssProp:l,inlineStyle:r,text:i,children:c}=e;const s=qe(),u=Le(),[g,d]=o.a.useState(null),m=t.options||a.options;o.a.useEffect((()=>{const e=Be(s.editorState,Object.keys(n.customStyleMap),null);d(e&&n.customStyleMap[e]?{color:n.customStyleMap[e][l],value:e}:null)}),[s.editorState,n.customStyleMap,l]);return o.a.createElement(ut,{text:i,onSelectColor:e=>{d(e);const t=Fe(s.editorState,Object.keys(n.customStyleMap),e?e.value:"");s.onChange(t),u()},selectedColor:g,colorsPerRow:t.colorsPerRow||a.colorsPerRow,disabled:s.editorState.getSelection().isCollapsed(),colors:m.map((e=>({text:e.text,color:e.value,value:"".concat(r,"-").concat(e.value)})))},c)}function dt(e){let{configuration:t,defaultConfiguration:a,pluginData:n}=e;const l=qe();return o.a.createElement(gt,{text:l.translate("controls.fontColor.title"),configuration:t,defaultConfiguration:a,inlineStyle:_e,pluginData:n,colorCssProp:"color"},o.a.createElement(ae.a,null))}ut.propTypes={selectedColor:c.a.object,onSelectColor:c.a.func.isRequired,colors:c.a.array.isRequired,colorsPerRow:c.a.number,children:c.a.any},gt.propTypes={configuration:c.a.object,defaultConfiguration:c.a.object.isRequired,pluginData:c.a.object.isRequired,colorCssProp:c.a.string.isRequired,inlineStyle:c.a.string.isRequired,text:c.a.string,children:c.a.any},dt.propTypes={configuration:c.a.object,defaultConfiguration:c.a.object.isRequired,pluginData:c.a.object.isRequired};function mt(e){let{configuration:t,defaultConfiguration:a,pluginData:n}=e;const l=qe();return o.a.createElement(gt,{text:l.translate("controls.fontBackgroundColor.title"),configuration:t,defaultConfiguration:a,inlineStyle:Ge,pluginData:n,colorCssProp:"backgroundColor"},o.a.createElement(ce.a,null))}mt.propTypes={configuration:c.a.object,defaultConfiguration:c.a.object.isRequired,pluginData:c.a.object.isRequired};const pt=Object(p.a)((e=>({imgWrapper:{maxWidth:"100%",maxHeight:300,overflow:"auto",marginTop:2,marginBottom:2}})));function ht(e){let{width:t,height:a,src:n}=e;const l=pt();return o.a.createElement("div",{className:l.imgWrapper},o.a.createElement("img",{alt:"",width:t,height:a,src:n}))}function ft(e){let{originalWidth:t,originalHeight:a,width:n,height:l,onChangeWidth:r,onChangeHeight:i}=e;const c=qe(),[s,u]=o.a.useState(!0),d=t/a;return o.a.createElement(be.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2},o.a.createElement(be.a,{item:!0},o.a.createElement(I.a,{type:"number",label:c.translate("controls.image.labels.width"),size:"small",value:n,onChange:e=>{e.stopPropagation();const t=e.currentTarget.value,a=""===t||isNaN(t)?0:parseInt(t);r(a),s&&i(Math.round(a/d))},onClick:e=>e.stopPropagation(),style:{maxWidth:90}})),o.a.createElement(be.a,{item:!0},o.a.createElement(g.a,{onClick:()=>{const e=!s;u(e),e&&i(Math.round(n/d))},size:"small"},s?o.a.createElement(Se.a,null):o.a.createElement(ve.a,null))),o.a.createElement(be.a,{item:!0},o.a.createElement(I.a,{type:"number",label:c.translate("controls.image.labels.height"),size:"small",value:l,onChange:e=>{e.stopPropagation();const t=e.currentTarget.value,a=""===t||isNaN(t)?0:parseInt(t);i(a),s&&r(Math.round(a*d))},onClick:e=>e.stopPropagation(),style:{maxWidth:90}})))}function bt(e){let{open:t,onClose:a,onSubmit:n}=e;const l=qe(),[r,i]=o.a.useState(""),[c,s]=o.a.useState(0),[u,g]=o.a.useState(0),[d,m]=o.a.useState(0),[p,h]=o.a.useState(0),[f,b]=o.a.useState(!1),[y,C]=o.a.useState(!1),[E,v]=o.a.useState(!1),[k,S]=o.a.useState(null),x=e=>{if(i(e),k&&(clearTimeout(k),S(null)),""===e)return v(!1),void C(!1);const t=setTimeout((()=>{b(!0);const t=new Image;t.onload=function(){s(this.width),g(this.width),m(this.height),h(this.height),b(!1),C(!0),v(!1)},t.onerror=function(){b(!1),C(!1),v(!0)},t.src=e,S(null)}),1e3);S(t)};let R=null;return f?R=o.a.createElement(ye.a,null):y&&r?R=o.a.createElement(ht,{src:r,height:d,width:c}):E&&!y&&r&&(R=o.a.createElement(Ce.a,{variant:"subtitle1",color:"error",gutterBottom:!0},l.translate("controls.image.errorMessages.notValidImage"))),o.a.createElement(w.a,{open:t,onClose:a,onEnter:()=>{C(!1),i("")}},o.a.createElement("form",{onSubmit:e=>{e.preventDefault(),n({imageURL:r,imageWidth:c,imageHeight:d})}},o.a.createElement(A.a,null,y&&""!==r&&o.a.createElement(ft,{width:c,onChangeHeight:m,height:d,originalWidth:u,originalHeight:p,onChangeWidth:s}),o.a.createElement(be.a,{container:!0,alignItems:"center",justify:"center"},R),o.a.createElement(I.a,{autoFocus:!0,label:l.translate("controls.image.labels.url"),value:r,onChange:e=>x(e.currentTarget.value),fullWidth:!0})),o.a.createElement(D.a,null,o.a.createElement(q.a,{type:"button",onClick:a,color:"primary"},l.translate("controls.image.actions.cancel")),o.a.createElement(q.a,{type:"submit",color:"primary",disabled:!y},l.translate("controls.image.actions.add")))))}ht.propTypes={width:c.a.number.isRequired,height:c.a.number.isRequired,src:c.a.string.isRequired},ft.propTypes={originalWidth:c.a.number.isRequired,originalHeight:c.a.number.isRequired,width:c.a.number.isRequired,height:c.a.number.isRequired,onChangeWidth:c.a.func.isRequired,onChangeHeight:c.a.func.isRequired},bt.propTypes={open:c.a.bool.isRequired,onClose:c.a.func.isRequired,onSubmit:c.a.func.isRequired};const yt=Object(p.a)((e=>({dropArea:e=>{let{highlightDropArea:t}=e;return{width:500,height:300,boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center",padding:2,marginTop:1,marginBottom:2,borderRadius:4,backgroundColor:t?"#bdbdbd":"#eeeeee",border:t?"solid 3px #757575":"dashed 3px #bdbdbd",color:"rgba(0, 0, 0, 0.38)",cursor:"pointer"}}})));function Ct(e){let{open:t,onClose:a,onSubmit:n,uploadCallback:l}=e;const r=qe(),[i,c]=o.a.useState(""),[s,u]=o.a.useState(0),[g,d]=o.a.useState(0),[m,p]=o.a.useState(0),[h,f]=o.a.useState(0),[b,y]=o.a.useState(!1),[C,E]=o.a.useState(!1),[v,k]=o.a.useState(!1),[S,x]=o.a.useState(null),[R,T]=o.a.useState(!1),j=o.a.createRef(),O=yt({highlightDropArea:R}),I=async e=>{T(!1),y(!0);try{const t=await l(e);c(t);const a=new Image;a.onload=function(){u(this.width),d(this.width),p(this.height),f(this.height),y(!1),E(!0),k(!1)},a.onerror=function(){y(!1),E(!1),k(!0),x(null)},a.src=t}catch(t){y(!1),E(!1),k(!0),x(t)}};let L=o.a.createElement(Ce.a,{variant:"subtitle1"},r.translate("controls.image.labels.dropImageHere"));return b?L=o.a.createElement(ye.a,null):C&&i&&(L=o.a.createElement(ht,{src:i,height:m,width:s})),o.a.createElement(w.a,{open:t,onClose:a,onEnter:()=>{c(""),E(!1),y(!1),T(!1)}},o.a.createElement("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),n({imageURL:i,imageWidth:s,imageHeight:m})}},o.a.createElement(A.a,null,o.a.createElement("input",{ref:j,type:"file",accept:"image/*",onChange:async()=>{const e=j.current.files;e.length>0&&await I(e[0])},style:{display:"none"}}),C&&""!==i&&o.a.createElement(ft,{originalWidth:g,originalHeight:h,width:s,height:m,onChangeWidth:u,onChangeHeight:p}),v&&!C&&o.a.createElement(Ce.a,{variant:"subtitle1",color:"error",align:"center",gutterBottom:!0},null!==S?S:r.translate("controls.image.errorMessages.notValidImage")),o.a.createElement("div",{className:O.dropArea,onClick:e=>{e.preventDefault(),j.current.click()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),T(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),T(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),T(!0)},onDrop:async e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.files;t.length>0&&await I(t[0])}},L)),o.a.createElement(D.a,null,o.a.createElement(q.a,{type:"button",onClick:a,color:"primary"},r.translate("controls.image.actions.cancel")),o.a.createElement(q.a,{type:"submit",color:"primary",disabled:!C},r.translate("controls.image.actions.add")))))}function Et(e){let{open:t,onClose:a,src:n,originalWidth:l,originalHeight:r,onSave:i}=e;const[c,s]=o.a.useState(0),[u,g]=o.a.useState(0),d=qe();o.a.useEffect((()=>{s(l),g(r)}),[l,r]);return o.a.createElement(w.a,{open:t,onClose:a},o.a.createElement("form",{onSubmit:e=>{e.preventDefault(),i(c,u)}},o.a.createElement(A.a,null,o.a.createElement(ft,{width:c,height:u,onChangeWidth:s,onChangeHeight:g,originalWidth:l,originalHeight:r}),o.a.createElement(be.a,{container:!0,alignItems:"center",justify:"center"},o.a.createElement(ht,{src:n,width:c,height:u}))),o.a.createElement(D.a,null,o.a.createElement(q.a,{type:"button",onClick:()=>a()},d.translate("controls.image.actions.cancel")),o.a.createElement(q.a,{type:"submit"},d.translate("controls.image.actions.resize")))))}function vt(e){let{configuration:t,defaultConfiguration:a}=e;const n=qe(),l=Le(),r=Math.random().toString(36).substring(8),[i,c]=o.a.useState(null),[u,g]=o.a.useState(!1),[d,m]=o.a.useState(!1),p=t.uploadCallback||a.uploadCallback,h=n.resizeImageEntityKey?n.editorState.getCurrentContent().getEntity(n.resizeImageEntityKey):null,f=e=>{let{imageURL:t,imageWidth:a,imageHeight:o}=e;if(""===t)return;m(!1),g(!1);const r=n.editorState.getCurrentContent().createEntity($e,"IMMUTABLE",{src:t,width:a,height:o}),i=r.getLastCreatedEntityKey(),c=s.EditorState.push(n.editorState,r,"apply-entity");n.onChange(s.AtomicBlockUtils.insertAtomicBlock(c,i," ")),l()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me,{onClick:e=>c(e.currentTarget),text:n.translate("controls.image.title"),"aria-controls":r,"aria-haspopup":"true"},o.a.createElement(ue.a,null)),o.a.createElement(z.a,{id:r,anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,open:Boolean(i),onClose:()=>c(null)},o.a.createElement(ge.a,{component:"nav","aria-label":n.translate("controls.image.labels.insertOptions")},o.a.createElement(de.a,{button:!0,onClick:()=>{g(!0),c(null)}},o.a.createElement(me.a,null,o.a.createElement(fe.a,null)),o.a.createElement(pe.a,{primary:n.translate("controls.image.actions.upload")})),o.a.createElement(de.a,{button:!0,onClick:()=>{m(!0),c(null)}},o.a.createElement(me.a,null,o.a.createElement(O.a,null)),o.a.createElement(pe.a,{primary:n.translate("controls.image.actions.url")})))),o.a.createElement(bt,{onSubmit:f,onClose:()=>m(!1),open:d}),o.a.createElement(Ct,{onSubmit:f,onClose:()=>g(!1),open:u,uploadCallback:p}),o.a.createElement(Et,{open:n.isResizeImageDialogVisible,onClose:()=>n.hideResizeImageDialog(),src:h?h.getData().src:"",originalWidth:h?h.getData().width:0,originalHeight:h?h.getData().height:0,onSave:(e,t)=>{n.hideResizeImageDialog();const a=n.editorState.getCurrentContent(),o=s.EditorState.push(n.editorState,a.mergeEntityData(n.resizeImageEntityKey,{width:e,height:t}),"apply-entity");n.onChange(o),l()}}))}Ct.propTypes={open:c.a.bool.isRequired,onClose:c.a.func.isRequired,onSubmit:c.a.func.isRequired,uploadCallback:c.a.func.isRequired},Et.propTypes={open:c.a.bool.isRequired,onClose:c.a.func.isRequired,src:c.a.string.isRequired,originalWidth:c.a.number.isRequired,originalHeight:c.a.number.isRequired,onSave:c.a.func.isRequired},vt.propTypes={configuration:c.a.object.isRequired,defaultConfiguration:c.a.object.isRequired};const kt=e=>{let{contentState:t,block:a}=e;const n=t.getEntity(a.getEntityAt(0));if(n.getType()===$e){const{src:e,width:l="auto",height:r="auto"}=n.getData();return o.a.createElement(xt,{src:e,width:l,height:r,block:a,contentState:t})}return null};kt.propTypes={contentState:c.a.object.isRequired,block:c.a.object.isRequired};const St=Object(p.a)((e=>({imgInfo:{padding:.6}}))),xt=e=>{let{src:t,width:a,height:n,contentState:l,block:r}=e;const[i,c]=o.a.useState(null),[u,g]=o.a.useState(null),d=qe(),m=Le(),p=St(),h=()=>{c(null),g(null)},f=(e,t)=>{e.preventDefault(),e.stopPropagation();const a=s.SelectionState.createEmpty(r.getKey()).merge({anchorKey:r.getKey(),anchorOffset:0,focusKey:r.getKey(),focusOffset:r.getLength()}),n=s.Modifier.setBlockData(l,a,{textAlign:t});d.onChange(s.EditorState.push(d.editorState,n,"change-block-data")),m()};return t?o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{alt:t,src:t,width:a,height:n,onClick:e=>{c(e.currentTarget),g(e.currentTarget)}}),o.a.createElement(z.a,{open:Boolean(u),onClose:h,anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},o.a.createElement(Ce.a,{color:"textSecondary",variant:"body1",className:p.imgInfo},a,"\xa0x\xa0",n)),o.a.createElement(z.a,{open:Boolean(i),onClose:h,anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},o.a.createElement(M.a,{size:"small","aria-label":d.translate("controls.image.labels.editOptions")},o.a.createElement(q.a,{onClick:e=>f(e,"left"),title:d.translate("controls.image.actions.alignLeft")},o.a.createElement(Re.a,null),o.a.createElement(ue.a,null)),o.a.createElement(q.a,{onClick:e=>f(e,"center"),title:d.translate("controls.image.actions.alignCenter")},o.a.createElement(Re.a,null),o.a.createElement(ue.a,null),o.a.createElement(je.a,null)),o.a.createElement(q.a,{onClick:e=>f(e,"right"),title:d.translate("controls.image.actions.alignRight")},o.a.createElement(ue.a,null),o.a.createElement(je.a,null)),o.a.createElement(q.a,{onClick:()=>{h(),d.showResizeImageDialog(r.getEntityAt(0))},title:d.translate("controls.image.actions.resize")},o.a.createElement(we.a,null)),o.a.createElement(q.a,{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=s.SelectionState.createEmpty(r.getKey()).merge({anchorKey:r.getKey(),anchorOffset:0,focusKey:r.getKey(),focusOffset:r.getLength()});let a=s.Modifier.removeRange(l,t,"forward");const n=a.getBlockMap().delete(r.getKey()),o=a.getFirstBlock(),i=s.SelectionState.createEmpty(o.getKey()).merge({anchorKey:o.getKey(),anchorOffset:0,focusKey:o.getKey(),focusOffset:0});a=a.merge({blockMap:n,selectionAfter:i}),d.onChange(s.EditorState.push(d.editorState,a,"remove-range")),m()},title:d.translate("controls.image.actions.remove")},o.a.createElement(Ie.a,null))))):null};xt.propTypes={src:c.a.string,width:c.a.oneOfType([c.a.string,c.a.number]).isRequired,height:c.a.oneOfType([c.a.string,c.a.number]).isRequired,contentState:c.a.object.isRequired,block:c.a.object.isRequired};const Rt={divider:{name:"divider",component:function(){return o.a.createElement(u.a,{orientation:"vertical",flexItem:!0})}},undo:{name:"undo",component:function(){const e=qe(),t=Le();return o.a.createElement(Me,{onClick:()=>{e.onChange(s.EditorState.undo(e.editorState)),t()},text:e.translate("controls.undo.title")},o.a.createElement(f.a,null))}},redo:{name:"undo",component:function(){const e=qe(),t=Le();return o.a.createElement(Me,{onClick:()=>{e.onChange(s.EditorState.redo(e.editorState)),t()},text:e.translate("controls.redo.title")},o.a.createElement(y.a,null))}},bold:{name:"bold",component:function(){const e=qe();return o.a.createElement(Ne,{inlineStyle:Ke,text:e.translate("controls.bold.title")},o.a.createElement(E.a,null))}},italic:{name:"italic",component:function(){const e=qe();return o.a.createElement(Ne,{inlineStyle:Pe,text:e.translate("controls.italic.title")},o.a.createElement(k.a,null))}},underline:{name:"underline",component:function(){const e=qe();return o.a.createElement(Ne,{inlineStyle:We,text:e.translate("controls.underline.title")},o.a.createElement(x.a,null))}},strikethrough:{name:"strikethrough",component:function(){const e=qe();return o.a.createElement(Ne,{inlineStyle:He,text:e.translate("controls.strikethrough.title")},o.a.createElement(T.a,null))}},fontColor:{name:"fontColor",component:dt,plugin:(e,t)=>{const a=e.options||t.options,n={};for(const o of a)n["".concat(_e,"-").concat(o.value)]={color:o.value};return{customStyleMap:n}}},fontBackgroundColor:{name:"fontBackgroundColor",component:mt,plugin:(e,t)=>{const a=e.options||t.options,n={};for(const o of a)n["".concat(Ge,"-").concat(o.value)]={backgroundColor:o.value};return{customStyleMap:n}}},linkAdd:{name:"linkAdd",component:function(){const e=qe(),t=Le(),[a,n]=o.a.useState(!1),[l,r]=o.a.useState(""),i=o.a.createRef(),c=()=>{n(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Me,{onClick:()=>{r(""),n(!0)},text:e.translate("controls.linkAdd.title"),disabled:e.editorState.getSelection().isCollapsed()},o.a.createElement(O.a,null)),o.a.createElement(w.a,{open:a,onClose:c},o.a.createElement("form",{ref:i,onSubmit:a=>{a.preventDefault(),""!==l&&(c(),e.onChange(((e,t,a,n)=>{const o=e.getCurrentContent().createEntity(t,a,n),l=o.getLastCreatedEntityKey(),r=e.getSelection(),i=s.Modifier.applyEntity(o,r,l);return s.EditorState.push(e,i,"apply-entity")})(e.editorState,Je,"MUTABLE",{url:l})),t())}},o.a.createElement(A.a,null,o.a.createElement(I.a,{autoFocus:!0,label:e.translate("controls.linkAdd.labels.link"),value:l,onChange:e=>{r(e.currentTarget.value)},fullWidth:!0})),o.a.createElement(D.a,null,o.a.createElement(q.a,{type:"button",onClick:c,color:"primary"},e.translate("controls.linkAdd.actions.cancel")),o.a.createElement(q.a,{type:"submit",color:"primary",disabled:""===l},e.translate("controls.linkAdd.actions.add"))))))},plugin:()=>({decorators:[{strategy:Ye,component:Ze}]})},linkRemove:{name:"linkRemove",component:function(){const e=qe();return o.a.createElement(Me,{onClick:()=>{const t=e.editorState.getSelection();e.onChange(s.RichUtils.toggleLink(e.editorState,t,null))},text:e.translate("controls.linkRemove.title"),disabled:e.editorState.getSelection().isCollapsed()},o.a.createElement(K.a,null))}},image:{name:"image",component:vt,plugin:()=>({blockRendererFn:e=>{if(e.getType()===ot)return{component:kt,editable:!1}}})},blockType:{name:"blockType",component:tt},fontSize:{name:"fontSize",component:it,plugin:(e,t)=>{const a=e.options||t.options,n={};for(const o of a)n["".concat(Ve,"-").concat(o)]="default"===o?{}:{fontSize:o};return{customStyleMap:n}}},fontFamily:{name:"fontFamily",component:lt,plugin:(e,t)=>{const a=e.options||t.options,n={};for(const o of a)n["".concat(Ue,"-").concat(o)]="default"===o?{}:{fontFamily:o};return{customStyleMap:n}}},textAlign:{name:"textAlign",component:rt,plugin:()=>({blockStyleFn:e=>{const t=e.getData()?e.getData().get("textAlign"):null;return t?"mui-editor-".concat(t,"-aligned-block"):""}})},unorderedList:{name:"unorderedList",component:function(){const e=qe();return o.a.createElement(at,{blockType:"unordered-list-item",text:e.translate("controls.unorderedList.title")},o.a.createElement(U.a,null))}},orderedList:{name:"orderedList",component:function(){const e=qe();return o.a.createElement(at,{blockType:nt,text:e.translate("controls.orderedList.title")},o.a.createElement(_.a,null))}}},Tt=[Rt.undo,Rt.redo,Rt.divider,Rt.bold,Rt.italic,Rt.underline,Rt.strikethrough,Rt.fontColor,Rt.fontBackgroundColor,Rt.divider,Rt.linkAdd,Rt.linkRemove,Rt.image,Rt.divider,Rt.blockType,Rt.fontSize,Rt.fontFamily,Rt.textAlign,Rt.divider,Rt.unorderedList,Rt.orderedList],jt=[{text:"black",value:"rgb(0, 0, 0)"},{text:"dark grey 4",value:"rgb(67, 67, 67)"},{text:"dark grey 3",value:"rgb(102, 102, 102)"},{text:"dark grey 2",value:"rgb(153, 153, 153)"},{text:"dark grey 1",value:"rgb(183, 183, 183)"},{text:"grey",value:"rgb(204, 204, 204)"},{text:"light grey 1",value:"rgb(217, 217, 217)"},{text:"light grey 2",value:"rgb(239, 239, 239)"},{text:"light grey 3",value:"rgb(243, 243, 243)"},{text:"white",value:"rgb(255, 255, 255)"},{text:"Red berry",value:"rgb(152, 0, 0)"},{text:"red",value:"rgb(255, 0, 0)"},{text:"orange",value:"rgb(255, 153, 0)"},{text:"yellow",value:"rgb(255, 255, 0)"},{text:"green",value:"rgb(0, 255, 0)"},{text:"cyan",value:"rgb(0, 255, 255)"},{text:"cornflower blue",value:"rgb(74, 134, 232)"},{text:"blue",value:"rgb(0, 0, 255)"},{text:"purple",value:"rgb(153, 0, 255)"},{text:"magenta",value:"rgb(255, 0, 255)"},{text:"light red berry 3",value:"rgb(230, 184, 175)"},{text:"light red 3",value:"rgb(244, 204, 204)"},{text:"light orange 3",value:"rgb(252, 229, 205)"},{text:"light yellow 3",value:"rgb(255, 242, 204)"},{text:"light green 3",value:"rgb(217, 234, 211)"},{text:"light cyan 3",value:"rgb(208, 224, 227)"},{text:"light cornflower blue 3",value:"rgb(201, 218, 248)"},{text:"light blue 3",value:"rgb(207, 226, 243)"},{text:"light purple 3",value:"rgb(217, 210, 233)"},{text:"light magenta 3",value:"rgb(234, 209, 220)"},{text:"light red berry 2",value:"rgb(221, 126, 107)"},{text:"light red 2",value:"rgb(234, 153, 153)"},{text:"light orange 2",value:"rgb(249, 203, 156)"},{text:"light yellow 2",value:"rgb(255, 229, 153)"},{text:"light green 2",value:"rgb(182, 215, 168)"},{text:"light cyan 2",value:"rgb(162, 196, 201)"},{text:"light cornflower blue 2",value:"rgb(164, 194, 244)"},{text:"light blue 2",value:"rgb(159, 197, 232)"},{text:"light purple 2",value:"rgb(180, 167, 214)"},{text:"light magenta 2",value:"rgb(213, 166, 189)"},{text:"light red berry 1",value:"rgb(204, 65, 37)"},{text:"light red 1",value:"rgb(224, 102, 102)"},{text:"light orange 1",value:"rgb(246, 178, 107)"},{text:"light yellow 1",value:"rgb(255, 217, 102)"},{text:"light green 1",value:"rgb(147, 196, 125)"},{text:"light cyan 1",value:"rgb(118, 165, 175)"},{text:"light cornflower blue 1",value:"rgb(109, 158, 235)"},{text:"light blue 1",value:"rgb(111, 168, 220)"},{text:"light purple 1",value:"rgb(142, 124, 195)"},{text:"light magenta 1",value:"rgb(194, 123, 160)"},{text:"dark red berry 1",value:"rgb(166, 28, 0)"},{text:"dark red 1",value:"rgb(204, 0, 0)"},{text:"dark orange 1",value:"rgb(230, 145, 56)"},{text:"dark yellow 1",value:"rgb(241, 194, 50)"},{text:"dark green 1",value:"rgb(106, 168, 79)"},{text:"dark cyan 1",value:"rgb(69, 129, 142)"},{text:"dark cornflower blue 1",value:"rgb(60, 120, 216)"},{text:"dark blue 1",value:"rgb(61, 133, 198)"},{text:"dark purple 1",value:"rgb(103, 78, 167)"},{text:"dark magenta 1",value:"rgb(166, 77, 121)"},{text:"dark red berry 2",value:"rgb(133, 32, 12)"},{text:"dark red 2",value:"rgb(153, 0, 0)"},{text:"dark orange 2",value:"rgb(180, 95, 6)"},{text:"dark yellow 2",value:"rgb(191, 144, 0)"},{text:"dark green 2",value:"rgb(56, 118, 29)"},{text:"dark cyan 2",value:"rgb(19, 79, 92)"},{text:"dark cornflower blue 2",value:"rgb(17, 85, 204)"},{text:"dark blue 2",value:"rgb(11, 83, 148)"},{text:"dark purple 2",value:"rgb(53, 28, 117)"},{text:"dark magenta 2",value:"rgb(116, 27, 71)"},{text:"dark red berry 3",value:"rgb(91, 15, 0)"},{text:"dark red 3",value:"rgb(102, 0, 0)"},{text:"dark orange 3",value:"rgb(120, 63, 4)"},{text:"dark yellow 3",value:"rgb(127, 96, 0)"},{text:"dark green 3",value:"rgb(39, 78, 19)"},{text:"dark cyan 3",value:"rgb(12, 52, 61)"},{text:"dark cornflower blue 3",value:"rgb(28, 69, 135)"},{text:"dark blue 3",value:"rgb(7, 55, 99)"},{text:"dark purple 3",value:"rgb(32, 18, 77)"},{text:"dark magenta 3",value:"rgb(76, 17, 48)"}],Ot={blockType:{options:[{value:"default",text:"lang::controls.blockType.labels.normal"},{value:"header-one",text:"lang::controls.blockType.labels.header1"},{value:"header-two",text:"lang::controls.blockType.labels.header2"},{value:"header-three",text:"lang::controls.blockType.labels.header3"},{value:"header-four",text:"lang::controls.blockType.labels.header4"},{value:"header-five",text:"lang::controls.blockType.labels.header5"},{value:"header-six",text:"lang::controls.blockType.labels.header6"}]},image:{uploadCallback:e=>new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>a(n.error),n.readAsDataURL(e)}))},fontColor:{colorsPerRow:10,options:jt},fontBackgroundColor:{colorsPerRow:10,options:jt},fontSize:{options:["default","8px","9px","10px","11px","12px","14px","18px","24px","30px","36px","48px","60px","72px","96px"]},fontFamily:{options:["default","Arial","Verdana","Times New Roman","Georgia","Courier new","Lucida Console"]}},wt={lang:"en",translations:{},draftEditor:{},editor:{wrapperElement:De.a,className:"",style:{}},toolbar:{className:"",style:{},visible:!0,position:"top",controls:Tt,controlsConfig:Ot}};function At(e){return e&&"object"===typeof e&&!Array.isArray(e)}function It(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;const o=a.shift();if(At(e)&&At(o))for(const l in o)At(o[l])?(e[l]||Object.assign(e,{[l]:{}}),It(e[l],o[l])):Object.assign(e,{[l]:o[l]});return It(e,...a)}var Dt={ca:{controls:{undo:{title:"Desfer"},redo:{title:"Refer"},bold:{title:"Negreta"},italic:{title:"Cursiva"},underline:{title:"Subratllat"},strikethrough:{title:"Ratllat"},code:{title:"Codi"},fontColor:{title:"Color de font",labels:{noColor:"Sense color"}},fontBackgroundColor:{title:"Color de resaltat del text",labels:{noColor:"Sense color"}},linkAdd:{title:"Afegir enlla\xe7",labels:{link:"Enlla\xe7"},actions:{add:"Afegir",cancel:"Cancel\xb7lar"}},linkRemove:{title:"Eliminar enlla\xe7"},image:{title:"Afegir imatge",actions:{upload:"Pujar imatge",url:"Des de URL",add:"Afegir",cancel:"Cancel\xb7lar",alignLeft:"Alinear a l'esquerra",alignCenter:"Centrar",alignRight:"Alinear a la dreta",remove:"Eliminar imatge",resize:"Redimensionar"},labels:{dropImageHere:"Arrossega una imatge aqu\xed o fes click per a pujar una",width:"Ample",height:"Alt",url:"URL",insertOptions:"Opcions de afegir imatge",editOptions:"Opcions d'imatge"},errorMessages:{notValidImage:"La imatge no \xe9s v\xe0lida"}},blockType:{title:"Format de bloc",labels:{normal:"Normal",header1:"T\xedtol 1",header2:"T\xedtol 2",header3:"T\xedtol 3",header4:"T\xedtol 4",header5:"T\xedtol 5",header6:"T\xedtol 6"}},fontSize:{title:"Grand\xe0ria de font",labels:{default:"Per defecte"}},fontFamily:{title:"Font",labels:{default:"Per defecte"}},textAlign:{title:"Alinear text",actions:{alignLeft:"Esquerra",alignCenter:"Centre",alignRight:"Dreta",justify:"Justificar"}},unorderedList:{title:"Vinyetes"},orderedList:{title:"Numeraci\xf3"}}},en:{controls:{undo:{title:"Undo"},redo:{title:"Redo"},bold:{title:"Bold"},italic:{title:"Italic"},underline:{title:"Underline"},strikethrough:{title:"Strike through"},code:{title:"Code"},fontColor:{title:"Font color",labels:{noColor:"None"}},fontBackgroundColor:{title:"Highlight color",labels:{noColor:"None"}},linkAdd:{title:"Add link",labels:{link:"Link"},actions:{add:"Add",cancel:"Cancel"}},linkRemove:{title:"Remove link"},image:{title:"Insert image",actions:{upload:"Upload image",url:"By URL",add:"Add",cancel:"Cancel",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",remove:"Remove image",resize:"Resize"},labels:{dropImageHere:"Drop image here or click to upload",width:"Width",height:"Height",url:"URL",insertOptions:"Insert image options",editOptions:"Image options"},errorMessages:{notValidImage:"Not a valid image"}},blockType:{title:"Block format",labels:{normal:"Normal",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",header6:"Header 6"}},fontSize:{title:"Font size",labels:{default:"default"}},fontFamily:{title:"Font type",labels:{default:"default"}},textAlign:{title:"Align text",actions:{alignLeft:"Left",alignCenter:"Center",alignRight:"Right",justify:"Justify"}},unorderedList:{title:"Unordered list"},orderedList:{title:"Ordered list"}}},es:{controls:{undo:{title:"Deshacer"},redo:{title:"Rehacer"},bold:{title:"Negrita"},italic:{title:"Cursiva"},underline:{title:"Subrayado"},strikethrough:{title:"Tachado"},code:{title:"C\xf3digo"},fontColor:{title:"Color de fuente",labels:{noColor:"Sin color"}},fontBackgroundColor:{title:"Color de resaltado de texto",labels:{noColor:"Sin color"}},linkAdd:{title:"A\xf1adir enlace",labels:{link:"Enlace"},actions:{add:"A\xf1adir",cancel:"Cancelar"}},linkRemove:{title:"Eliminar enlace"},image:{title:"Insertar imagen",actions:{upload:"Subir imagen",url:"Desde URL",add:"A\xf1adir",cancel:"Cancelar",alignLeft:"Alinear a la izquierda",alignCenter:"Centrar",alignRight:"Alinear a la derecha",remove:"Eliminar imagen",resize:"Redimensionar"},labels:{dropImageHere:"Arrastra una imagen aqu\xed o haz click para subir una",width:"Ancho",height:"Alto",url:"URL",insertOptions:"Opciones de insertar imagen",editOptions:"Opciones de imagen"},errorMessages:{notValidImage:"La imagen no es v\xe1lida"}},blockType:{title:"Formato de bloque",labels:{normal:"Normal",header1:"Encabezado 1",header2:"Encabezado 2",header3:"Encabezado 3",header4:"Encabezado 4",header5:"Encabezado 5",header6:"Encabezado 6"}},fontSize:{title:"Tama\xf1o de fuente",labels:{default:"Por defecto"}},fontFamily:{title:"Fuente",labels:{default:"Por defecto"}},textAlign:{title:"Alinear texto",actions:{alignLeft:"Izquierda",alignCenter:"Centro",alignRight:"Derecha",justify:"Justificar"}},unorderedList:{title:"Vi\xf1etas"},orderedList:{title:"Numeraci\xf3n"}}}};class qt{constructor(e){this.config=e||wt}getCompositeDecorator(){let e=[];for(const t of this.getToolbarControls()){const a=this.getPluginData(t);a&&a.decorators&&(e=e.concat(a.decorators))}return e.length>0?new s.CompositeDecorator(e):null}getCustomStyleMap(){let e={};for(const t of this.getToolbarControls()){const a=this.getPluginData(t);a&&a.customStyleMap&&(e={...e,...a.customStyleMap})}return e}getBlockRenderMap(){let e=s.DefaultDraftBlockRenderMap;for(const t of this.getToolbarControls()){const a=this.getPluginData(t);a&&a.blockRenderMap&&(e=e.merge(a.blockRenderMap))}return e}getBlockStyleFn(){return e=>{let t="";for(const a of this.getToolbarControls()){const n=this.getPluginData(a);if(n&&n.blockStyleFn){const a=n.blockStyleFn(e);a&&(t+=" "+a)}}return t.trim()}}getBlockRendererFn(){return e=>{for(const t of this.getToolbarControls()){const a=this.getPluginData(t);if(!a||!a.blockRendererFn)continue;const n=a.blockRendererFn(e);if(n)return n}}}getToolbarControls(){return this.getConfigItem("toolbar","controls")}getToolbarControlComponents(){const e={};return this.getToolbarControls().map((t=>(e[t.name]||(e[t.name]=0),e[t.name]++,o.a.createElement(t.component,{key:"".concat(t.name).concat(e[t.name]),configuration:this.getToolbarControlConfiguration(t.name),defaultConfiguration:Ot[t.name],pluginData:this.getPluginData(t)}))))}getToolbarControlConfiguration(e){return this.config&&this.config.toolbar&&this.config.toolbar.controlsConfig&&this.config.toolbar.controlsConfig[e]?this.config.toolbar.controlsConfig[e]:Ot[e]?Ot[e]:null}getPluginData(e){return e.plugin?e.plugin(this.getToolbarControlConfiguration(e.name),Ot[e.name]):null}getTranslations(){const e=this.getConfigItem("lang");return It(Dt[e],this.config.translations||{})}getToolbarPosition(){return this.getConfigItem("toolbar","position").toLowerCase()}getConfigItem(){let e={...this.config};for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];for(const o of a)if(e=e[o],void 0===e)break;if(void 0!==e)return e;e={...wt};for(const o of a)e=e[o];return e}}function Lt(e){let{children:t,visible:a=!0,...n}=e;return o.a.createElement(De.a,Object.assign({hidden:!a},n),o.a.createElement(be.a,{container:!0,alignItems:"center"},t))}Lt.propTypes={children:c.a.any,visible:c.a.bool};class zt{constructor(e){this.translations=e}get(e){if(!e)return"";const t=e.split(".");let a=this.translations;for(const n of t)if(a=a[n],void 0===a)return"";return a||""}}const Mt=o.a.createContext({}),Ft=e=>{const t=new qt(e);return s.EditorState.createEmpty(t.getCompositeDecorator())},Bt=Object(p.a)((e=>({"@global":{".mui-editor-left-aligned-block":{textAlign:"left !important","& > div":{textAlign:"left !important"}},".mui-editor-center-aligned-block":{textAlign:"center !important","& > div":{textAlign:"center !important"}},".mui-editor-right-aligned-block":{textAlign:"right !important","& > div":{textAlign:"right !important"}},".mui-editor-justify-aligned-block":{textAlign:"justify !important","& > div":{textAlign:"justify !important"}}},editorWrapper:{marginTop:2,marginBottom:2,padding:5}})));function Nt(e){let{editorState:t,onChange:a,onFocus:n=null,onBlur:l=null,config:r=wt}=e;const i=new qt(r),c=o.a.useRef(null),u=o.a.useRef((function(){})),g=o.a.useRef(null),d=i.getConfigItem("toolbar","visible"),[m,p]=o.a.useState(d),[h,f]=o.a.useState(!1),[b,y]=o.a.useState(null);g.current=i.getTranslations(),u.current=o.a.useCallback((e=>new zt(g.current).get(e)),[]);const C=Bt();o.a.useEffect((()=>{p(d)}),[d]);const E=o.a.createElement(Lt,{visible:m,style:i.getConfigItem("toolbar","style"),className:i.getConfigItem("toolbar","className")},i.getToolbarControlComponents()),v="top"===i.getToolbarPosition()?E:null,k="bottom"===i.getToolbarPosition()?E:null,S={style:i.getConfigItem("editor","style"),className:"".concat(C.editorWrapper," ").concat(i.getConfigItem("editor","className")),onClick:()=>c.current.focus()},x=i.getConfigItem("editor","wrapperElement");x===De.a&&(S.elevation=3);const R=o.a.createElement(x,S,o.a.createElement(s.Editor,Object.assign({},i.getConfigItem("draftEditor"),{ref:c,editorState:t,onChange:a,onFocus:e=>(e=>{n&&n(e)})(e),onBlur:e=>(e=>{l&&l(e)})(e),handleKeyCommand:e=>{const n=s.RichUtils.handleKeyCommand(t,e);return n?(a(n),"handled"):"not-handled"},blockStyleFn:i.getBlockStyleFn(),customStyleMap:i.getCustomStyleMap(),blockRenderMap:i.getBlockRenderMap(),blockRendererFn:i.getBlockRendererFn()})));return o.a.createElement(Mt.Provider,{value:{editorState:t,onChange:a,ref:c.current,translate:u.current,showResizeImageDialog:e=>{f(!0),y(e)},hideResizeImageDialog:()=>{f(!1),y(null)},isResizeImageDialogVisible:h,resizeImageEntityKey:b}},v,R,k)}Nt.displayName="MUIEditor",Nt.propTypes={editorState:c.a.object.isRequired,onChange:c.a.func.isRequired,onFocus:c.a.func,onBlur:c.a.func,config:c.a.object},Nt.defaultProps={config:wt};var Kt=Nt,Pt="unordered-list-item",Wt="ordered-list-item";const Ht={["header-one"]:"h1",["header-two"]:"h2",["header-three"]:"h3",["header-four"]:"h4",["header-five"]:"h5",["header-six"]:"h6",["blockquote"]:"blockquote",["code-block"]:"code",["unstyled"]:"p",["atomic"]:"figure",[Pt]:"li",[Wt]:"li"};const Ut={["LINK"]:e=>['<a href="'.concat(e.getData().url,'" target="_blank">'),"</a>"],["IMAGE"]:e=>['<img src="'.concat(e.data.src,'" alt="" width="').concat(e.getData().width,'" height="').concat(e.getData().height,'">'),""]};var Vt="BOLD",_t="ITALIC",Gt="UNDERLINE",Jt="STRIKETHROUGH",$t="CODE",Yt="FONT_FAMILY",Zt="FONT_SIZE",Qt="FONT_COLOR",Xt="FONT_BACKGROUND";const ea=(e,t)=>e.substr(0,t.length)===t,ta=(e,t)=>e.substr(t.length+1),aa=e=>{switch(e){case Vt:return"font-weight: bold;";case _t:return"font-style: italic;";case Gt:return"text-decoration: underline;";case Jt:return"text-decoration: line-through;";case $t:return"font-family: monospace;";default:return ea(e,Yt)?"font-family: '".concat(ta(e,Yt),"';"):ea(e,Zt)?"font-size: ".concat(ta(e,Zt),";"):ea(e,Qt)?"color: ".concat(ta(e,Qt),";"):ea(e,Xt)?"background-color: ".concat(ta(e,Xt),";"):""}};var na=e=>{let t="",a=!1;const n=e.getBlockMap();let o=0;for(const l of n){const r=l[1],i=Ht[r.getType()],c=r.getData().has("textAlign")?"text-align:".concat(r.getData().get("textAlign"),";"):null;let s=i?"<".concat(i).concat(c?' style="'.concat(c,'"'):"",">"):"",u=i?"</".concat(i,">"):"";if(r.getType()===Pt||r.getType()===Wt?(a||(s="".concat(r.getType()===Pt?"<ul>":"<ol>").concat(s)),o===n.length-1&&(u="".concat(u).concat(r.getType()===Pt?"</ul>":"</ol>")),a=!0):(a&&(s="".concat(r.getType()===Pt?"</ul>":"</ol>").concat(s)),a=!1),0===r.getLength()){t+=s+u;continue}t+=s;let g=null;const d={};for(const a in r.getText()){const n=parseInt(a)===r.getLength()-1;let o="",l="";const i=r.getEntityAt(a);if(i!==g)if(null===g){const t=e.getEntity(i);o=Ut[t.getType()](t)[0]}else if(null===i){const t=e.getEntity(g);l=Ut[t.getType()](t)[1]}else{const t=e.getEntity(g),a=e.getEntity(i);o=Ut[t.getType()](t)[0]+Ut[a.getType()](a)[1]}else if(null!==i&&n){const t=e.getEntity(i);l=Ut[t.getType()](t)[1]}const c=r.getInlineStyleAt(a),s=[],u=[],m=[],p=[],h=[];for(const e of c)void 0===d[e]?(u.push(e),d[e]=a):o||l?(s.push(e),h.push(d[e]),delete d[e]):n&&(m.push(e),p.push(d[e]),delete d[e]);for(const e in d)c.includes(e)||m.includes(e)||s.includes(e)?n&&(m.push(e),p.push(d[e]),delete d[e]):(s.push(e),h.push(d[e]),delete d[e]);for(const e of p)for(const t in d)d[t]>e&&(m.push(t),p.push(d[t]),delete d[t]);for(const e of h)for(const t in d)d[t]<a&&d[t]>e&&(s.push(t),h.push(d[t]),delete d[t],c.includes(t)&&(u.push(t),d[t]=a));let f=0;for(;f<s.length;)t+="</span>",f++;t+=o;for(const e of u)t+='<span style="'+aa(e)+'">';t+=r.getText()[a];let b=0;for(;b<m.length;)t+="</span>",b++;t+=l,g=i}t+=u,o++}return t},oa=a(402),la=a(395),ra=a(403),ia=a(396),ca=a(2);const sa=Object(p.a)((e=>({optionsWrapper:{paddingTop:5,paddingBottom:3}})));var ua=function(){const[e,t]=o.a.useState(Ft()),[a,n]=o.a.useState(!1),[l,r]=o.a.useState("en"),[i,c]=o.a.useState("top"),[s,u]=o.a.useState(""),g=sa();return Object(ca.jsxs)(oa.a,{children:[Object(ca.jsx)("div",{className:g.optionsWrapper,children:Object(ca.jsxs)(be.a,{container:!0,alignItems:"center",justify:"flex-end",spacing:4,children:[Object(ca.jsx)(be.a,{item:!0,children:Object(ca.jsx)(ra.a,{control:Object(ca.jsx)(ia.a,{checked:a,onChange:e=>n(e.target.checked)}),label:"Read only"})}),Object(ca.jsxs)(be.a,{item:!0,children:[Object(ca.jsx)(la.a,{id:"toolbar-position-select-label",children:"Toolbar position"}),Object(ca.jsxs)(P.a,{fullWidth:!0,labelId:"toolbar-position-select-label",id:"toolbar-position-select",value:i,onChange:e=>c(e.target.value),children:[Object(ca.jsx)(W.a,{value:"invisible",children:"Invisible"}),Object(ca.jsx)(W.a,{value:"top",children:"Top"}),Object(ca.jsx)(W.a,{value:"bottom",children:"Bottom"})]})]}),Object(ca.jsxs)(be.a,{item:!0,children:[Object(ca.jsx)(la.a,{id:"lang-select-label",children:"Language"}),Object(ca.jsxs)(P.a,{fullWidth:!0,labelId:"lang-select-label",id:"lang-select",value:l,onChange:e=>r(e.target.value),children:[Object(ca.jsx)(W.a,{value:"en",children:"English"}),Object(ca.jsx)(W.a,{value:"es",children:"Spanish"}),Object(ca.jsx)(W.a,{value:"ca",children:"Catalan"})]})]})]})}),Object(ca.jsx)(Kt,{editorState:e,onChange:e=>{t(e),u(na(e.getCurrentContent()))},config:{lang:l,draftEditor:{readOnly:a},toolbar:{visible:"invisible"!==i,position:"invisible"===i?"top":i}}}),Object(ca.jsx)("pre",{children:s})]})};r.a.render(Object(ca.jsx)(ua,{}),document.getElementById("root"))}},[[322,1,2]]]);
//# sourceMappingURL=main.b0835e59.chunk.js.map